console.log("Art wheel loading...");let movements=[],currentMovementIndex=0,selectedArtistIndex=0,isDragging=!1,startAngle=0;const wheelOrder=["Art History Wheel","AI and Algorithmic Art","Social Practice Art","Contemporary Indigenous Art","Post-Internet Art","Bio Art","Relational Aesthetics","Young British Artists (YBAs)","Digital Art / New Media Art","Installation Art","Street Art / Graffiti Art","Appropriation Art","Neo-Expressionism","Postminimalism","Photorealism","Land Art / Earthworks","Performance Art","Conceptual Art","Minimalism","Pop Art"];function cleanHtmlText(e){if(!e||typeof e!="string")return"";let t=e.replace(/<[^>]*>/g,"");return t=t.replace(/\s+/g," ").trim(),t=t.replace(/&nbsp;/g," "),t=t.replace(/&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&quot;/g,'"'),t}function getAngle(e,t,n){const s=n.left+n.width/2,o=n.top+n.height/2;return Math.atan2(t-o,e-s)*180/Math.PI}function rotateWheel(e){const t=document.getElementById("artWheel");if(t){let n=parseInt(t.dataset.rotation||"0");n+=e,t.style.transform="rotate("+n+"deg)",t.dataset.rotation=n;const o=(n%360+360)%360,s=Math.round(o/18)%20;s!==currentMovementIndex&&(currentMovementIndex=s,updateContent(currentMovementIndex))}}function updateContent(e){const t=movements[e];if(!t)return;selectedArtistIndex=0;const n=document.getElementById("artistsSection"),s=document.getElementById("artworkSection");if(t.isTitle)document.getElementById("movementTitle").textContent="Art History Wheel",document.getElementById("movementDescription").textContent="This interactive wheel explores 19 major art movements that shaped contemporary culture. From Pop Art's rebellion against Abstract Expressionism to today's digital innovations, discover the artists, artworks, and ideas that transformed how we see the world. Click through each movement to explore key artists and their most significant works.",n.style.display="none",s.style.display="none";else{document.getElementById("movementTitle").textContent=t.name,document.getElementById("movementDescription").textContent=cleanHtmlText(t.description),n.style.display="block",s.style.display="block";const e=document.getElementById("artistList");e.innerHTML="",t.artists&&t.artists.length>0&&(t.artists.forEach(function(t,n){const s=document.createElement("li");s.className="art-wheel-artist-item"+(n===0?" active":""),s.textContent=t.name,s.addEventListener("click",function(){selectArtist(n)}),e.appendChild(s)}),updateFeaturedArtwork(t,0))}}function selectArtist(e){selectedArtistIndex=e,document.querySelectorAll(".art-wheel-artist-item").forEach(function(t,n){n===e?t.classList.add("active"):t.classList.remove("active")}),updateFeaturedArtwork(movements[currentMovementIndex],e)}function updateFeaturedArtwork(e,t){if(!e.artists||!e.artists[t])return;const n=e.artists[t];document.getElementById("artworkTitle").textContent=cleanHtmlText(n.artwork.title),document.getElementById("artworkArtist").textContent="by "+cleanHtmlText(n.name),document.getElementById("artworkDescription").textContent=cleanHtmlText(n.artwork.description);const s=document.getElementById("artworkImage");n.artwork.imageUrl&&n.artwork.imageUrl!==""?(s.src=n.artwork.imageUrl,s.alt=cleanHtmlText(n.artwork.title)+" by "+cleanHtmlText(n.name)):s.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 200'><rect width='300' height='200' fill='%23ecf0f1'/><text x='150' y='100' text-anchor='middle' dy='0.3em' font-size='14' fill='%23666'>No Image</text></svg>";const o=document.getElementById("artworkSection");o&&n.slug&&o.setAttribute("data-artist-slug",n.slug)}function loadArtData(){const e=document.getElementById("art-data");if(e)try{const t=JSON.parse(e.textContent);let o=typeof t.movements=="string"?JSON.parse(t.movements):t.movements,i=typeof t.artists=="string"?JSON.parse(t.artists):t.artists;const n={};i.forEach(function(e){const t=e["Art Movement"];t&&t!==""&&(n[t]||(n[t]=[]),n[t].push({name:e["Artist Name"],slug:e.Slug,artwork:{title:e["Artwork Title"]||"Untitled",description:e["Artwork Description"]||"",imageUrl:e["Notable Artwork"]||""}}))});const s={};o.forEach(function(e){const t=e["Movement Name"]||e["Art Movement"];s[t]=e}),movements=wheelOrder.map(function(e){if(e==="Art History Wheel")return{name:"Art History Wheel",description:"Welcome to your comprehensive guide through contemporary art history.",isTitle:!0};let t=null,o=[];for(let i in s)if(i===e){t=s[i],o=n[i]||[];break}if(!t)for(let i in s)if(i.includes(e.split(" ")[0])||e.includes(i.split(" ")[0])){t=s[i],o=n[i]||[];break}return{name:e,description:t?t.Description||"":"Coming soon...",artists:o}}),updateContent(0)}catch(e){console.error("Error loading data:",e)}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("artWheel");if(!e)return;let s=!1,i=0,a=0,o=0,n=null,t=parseFloat(e.dataset.rotation||"0")||0;function c(e){return(e%360+360)%360}function r(n){t=n,e.style.transform="rotate("+t+"deg)",e.dataset.rotation=t;const o=c(t),s=Math.round(o/18)%20;s!==currentMovementIndex&&(currentMovementIndex=s,updateContent(currentMovementIndex))}function l(e,t){const n=t.left+t.width/2,s=t.top+t.height/2,o=Math.atan2(e.clientY-s,e.clientX-n)*180/Math.PI+90;return c(o)}function d(i){if(!s)return;s=!1;try{e.releasePointerCapture(i.pointerId)}catch{}document.body.style.userSelect="",e.style.cursor="grab";let a=o;const l=.95;function c(){if((a<0?-a:a)<5){r(Math.round(t/18)*18),n=null;return}r(t+a/60),a*=l,n=requestAnimationFrame(c)}n=requestAnimationFrame(c)}e.addEventListener("pointerdown",function(r){r.preventDefault(),t=parseFloat(e.dataset.rotation||"0")||0,n&&(cancelAnimationFrame(n),n=null),s=!0,e.setPointerCapture(r.pointerId);const c=e.getBoundingClientRect();i=l(r,c),a=r.timeStamp,o=0,e.style.cursor="grabbing",document.body.style.userSelect="none"}),e.addEventListener("pointermove",function(n){if(!s)return;const h=e.getBoundingClientRect(),d=l(n,h);let c=d-i;c>180&&(c-=360),c<-180&&(c+=360),r(t+c);const u=n.timeStamp-a;if(u>0){const e=c/u*1e3;o=.8*o+.2*e}i=d,a=n.timeStamp}),e.addEventListener("pointerup",d),e.addEventListener("pointercancel",d);const u=document.getElementById("artworkSection");u&&u.addEventListener("click",function(){const t=this.getAttribute("data-artist-slug");t&&(window.location.href="/artists/"+t)}),loadArtData()})